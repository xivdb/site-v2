function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function shuffle(e){for(var t,s,i=e.length;i;t=Math.floor(Math.random()*i),s=e[--i],e[i]=e[t],e[t]=s);return e}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),ManagerClass=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"findMember",value:function(){var e=$(".response"),t=$("#findMemberString").val().trim();0!=t.length&&(e.html(""),$.ajax({url:"/members/find",method:"post",data:{string:t},success:function(t){if(t.length>0)for(var s in t)e.append(render("#member",t[s]));else e.html('<div class="alert alert-error">No members found.</div>')},error:function(e){console.error(e.responseText)}}))}},{key:"watchPermissions",value:function(){var e=this;$(".permissions input").on("change",function(){var t=$(this).attr("id"),s=$(this).prop("checked");e.togglePermission(t,s)})}},{key:"togglePermission",value:function(e,t){var s=$("#permissions").val();s.length>0&&(s=JSON.parse(s)),s||(s={}),s[e]=t,$("#permissions").val(JSON.stringify(s))}}]),e}(),Manager=new ManagerClass,ManagerMapsClass=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"process",value:function(e,t){var s=$(".row-"+e);s.find(".status").text("Slicing ...");var i="/maps/slice/"+e;$.ajax({url:i,success:function(e){s.find(".status").html('Saved: <em class="pink">'+e+"</em>"),t&&t()},error:function(e){s.find(".status").text("Error slicing ..."),console.log("Error"),console.log(e)}})}},{key:"processAll",value:function(){var e=[];$("table tr[data-table]").each(function(t,s){e.push($(s).attr("data-table"))}),$(".status").html('<em class="green">Queued ...</em>'),this.processRecussion(e)}},{key:"processRecussion",value:function(e){var t=this;return 0==e.length?console.log("Finished"):void((id=e[0])&&(e.shift(),this.process(id,function(){t.processRecussion(e)})))}}]),e}(),ManagerMaps=new ManagerMapsClass,MapsClass=function(){function e(){_classCallCheck(this,e),this.div="mainMapWindow",this.tiles="/img/maps/",this.format="/{z}/{x}_{y}.png",this.instance=null,this.domain="http://xivdb.dev",this.zoom=1,this.minZoom=1,this.maxZoom=8,this.canEdit=!1,this.canCenter=!0,this.tileSize=128,this.fullsize=0,this["default"]="world/00"}return _createClass(e,[{key:"show",value:function(e){this.init(e),this.elements()}},{key:"init",value:function(e,t){if(this.fullsize=parseInt($("#"+this.div).attr("data-full")),MapsInterface.setFullsize(this.fullsize),e=e?e:MapsWebAddress.getIdFromUrl(),e=e?e:this["default"],e&&this.fullsize){var s=$('.maps .map-selection option[data-id="'+e+'"]').val();$(".maps .map-selection").val(s),s=s.split(",");var e=s[0],t=s[1]}e?(this.elements(),this.load(e,t),MapsInterface.refresh()):console.error("Still no id...")}},{key:"elements",value:function(){var e=this;$(".maps .map-selection").on("change",function(){var t=$(this).val().trim().split(","),s=t[0],i=t[1];e.load(s,i)})}},{key:"load",value:function(e,t){var s=this;MapsInterface.setStatus("id",e),MapsInterface.setStatus("name",t),MapsWebAddress.setUrl(this.status,this.fullsize),this.instance&&(this.instance.remove(),this.instance=null);var i=this.domain+this.tiles+e+this.format,a={},n={1:{x:4,y:4},2:{x:8,y:8},3:{x:12,y:12},4:{x:16,y:16},5:{x:20,y:20},6:{x:24,y:24},7:{x:28,y:28},8:{x:32,y:32}};this.instance=L.map(this.div,{center:[0,0],zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,markerZoomAnimation:!1,attributionControl:!1,detectRetina:!0,crs:this.customCRS()}),this.instance.setView(this.getCenter(),this.zoom),MapsInterface.setStatus("zoom",s.instance.getZoom()),this.instance.on("zoomend",function(){MapsInterface.setStatus("zoom",s.instance.getZoom()),MapsInterface.refresh()}),this.instance.on("click",function(e){new L.marker(e.latlng).addTo(s.instance)}),a[t]=L.tileLayer.limited(i,{minZoom:this.minZoom,maxZoom:this.maxZoom,continuousWorld:!0,noWrap:!0,tileSize:this.tileSize,tileLimits:n,crs:this.customCRS(),detectRetina:!1}),a[t].addTo(this.instance),MapsInterface.refresh(),MapsInterface.placename()}},{key:"customCRS",value:function(){return _this=this,L.extend({},L.CRS.Simple,{scale:function(e){return _this.tileSize*e}})}},{key:"getCenter",value:function(){return this.instance.unproject([2048,2048],this.maxZoom)}},{key:"center",value:function(){this.instance.invalidateSize(),this.instance.setView([0,0])}},{key:"position",value:function(e,t){this.instance.invalidateSize(),this.instance.setView([t,e])}},{key:"marker",value:function(e,t,s,i){var a=t/2,n=L.icon({iconUrl:e,iconSize:[t,t],iconAnchor:[a,a]});L.marker([i,s],{icon:n}).addTo(this.instance)}}]),e}(),Maps=new MapsClass,MapsInterfaceClass=function(){function e(){_classCallCheck(this,e),this.fullsize=0,this.layers=[],this.status={}}return _createClass(e,[{key:"setFullsize",value:function(e){this.fullsize=e}},{key:"refresh",value:function(){this.fullsize&&($(".map-status .map-status-zoom em").text(this.status.zoom),$(".map-status .map-status-download em").text(this.status.name),$(".map-status .map-status-download").attr("href","/maps/download/"+this.status.id))}},{key:"setStatus",value:function(e,t){this.status[e]=t}},{key:"placename",value:function t(){if(this.fullsize){var t=$(".maps .map-selection option:selected").attr("data-placename"),e=this.status.name.replace(new RegExp(" ","g"),"+").toLowerCase(),s="/placename/"+t+"/"+e;this.setStatus("placename",t),this.setStatus("placenameUrl",s),$(".map-status .map-status-contentlink").attr("href",s)}}},{key:"maximize",value:function(){$("html").hasClass("maximized")?($("html").removeClass("maximized"),$(".map-viewport").removeClass("maximized"),$(".map-status").removeClass("maximized"),$(".map-window").removeClass("maximized"),$(".map-ui-maximize").removeClass("red").addClass("green").html('<i class="fa fa-arrows"></i>')):($("html").addClass("maximized"),$(".map-viewport").addClass("maximized"),$(".map-status").addClass("maximized"),$(".map-window").addClass("maximized"),$(".map-ui-maximize").removeClass("green").addClass("red").html('<i class="fa fa-times"></i>')),Maps.center()}}]),e}(),MapsInterface=new MapsInterfaceClass;$(function(){"undefined"!=typeof L&&(L.Point.prototype.distanceToSq=function(e){e=L.point(e);var t=e.x-this.x,s=e.y-this.y;return t*t+s*s},L.TileLayer.Limited=L.TileLayer.extend({_tileShouldBeLoaded:function(e){if(!L.TileLayer.prototype._tileShouldBeLoaded.call(this,e))return!1;if(this.options.tileLimits){var t=this._getZoomForUrl();return limit=this.options.tileLimits[t],void 0===limit&&(limit=Math.pow(2,t)),!!(limit&&e.x>=0&&e.x<limit.x&&e.y>=0&&e.y<limit.y)}return!0}}),L.tileLayer.limited=function(e,t){return new L.TileLayer.Limited(e,t)},L.CanvasLayer=L.Browser.canvas?L.TileLayer.Canvas.extend({statics:{Images:{}},options:{autoRedraw:!0,sortOrder:1},setAutoRedraw:function(e){this.options.autoRedraw=e},initialize:function(e){L.Util.setOptions(this,e),this.layers={},this.layerGrid={},this._loadingImages=0,this._images={},this._dirtyLayerGrid=!1,this._currentMarker=!1},onAdd:function(e){L.TileLayer.Canvas.prototype.onAdd.call(this,e),this._currentZoom=e.getZoom(),e.on("viewreset",$.proxy(this.redraw,this)),e.on("mousemove",$.proxy(this._mouseMove,this)),e.on("click",$.proxy(this._mouseClick,this)),e.on("contextmenu",$.proxy(this._mouseContextMenu,this))},onRemove:function(e){L.TileLayer.Canvas.prototype.onRemove.call(this,e),this.clear()},_mouseMove:function(e){var t=this._map.project(e.latlng),s=this._markerAtPoint(t),i=this._map._container;if(s===!1)return"default"!=i.style.cursor&&(i.style.cursor="default"),i.title&&(i.title=""),void(this._currentMarker&&(this._currentMarker.fire("mouseout",e),this._currentMarker=!1));"pointer"!=i.style.cursor&&(i.style.cursor="pointer"),s.options.title&&(i.title=s.options.title);L.stamp(s);this._currentMarker!==!1&&L.stamp(this._currentMarker)==L.stamp(s)||(this._currentMarker&&this._currentMarker.fire("mouseout",e),this._currentMarker=s,s.fire("mouseover",e))},_mouseClick:function(e){if(!this._map.dragging||!this._map.dragging.moved()){var t=this._map.project(e.latlng),s=this._markerAtPoint(t);s!==!1&&(s.fire("click",e),e.caught=!0)}},_mouseContextMenu:function(e){var t=this._map.project(e.latlng),s=this._markerAtPoint(t);s!==!1&&(s.fire("contextmenu",e),e.caught=!0)},_markerAtPoint:function(e){var t=this.options.tileSize,s=L.point([Math.floor(e.x/t),Math.floor(e.y/t)]),i=this.layerGrid[s.x]&&this.layerGrid[s.x][s.y]?this.layerGrid[s.x][s.y]:[];if(0==i.length)return!1;for(var a=i.length-1;a>=0;--a)if(i[a].options.visible&&i[a].options.clickable&&i[a]._bounds.contains(e))return i[a];return!1},addLayer:function(e){if(!e instanceof L.Marker)return void console.log("CanvasLayer: unsupported layer type added");if(!this._map)return void console.log("CanvasLayer: not added to map before adding layers");var t=L.Util.stamp(e);e._canvasLayer=this,this.layers[t]=e,e.options.draggable||e.options.icon instanceof L.DivIcon?this._map.addLayer(e):(this._preloadImage(e.options.icon.options.iconUrl),this._addLayer(e)),this.options.autoRedraw&&this.redraw()},removeLayer:function(e){var t=L.Util.stamp(e);delete this.layers[t],e.options.draggable||e.options.icon instanceof L.DivIcon?this._map.removeLayer(e):this._dirtyLayerGrid=!0,this.options.autoRedraw&&this.redraw()},clear:function(){var e;for(var t in this.layers)e=this.layers[t],e.options.draggable||e.options.icon instanceof L.DivIcon?this._map.removeLayer(e):e._canvasLayer=null;this.layers={},this._dirtyLayerGrid=!0,this.options.autoRedraw&&this.redraw()},_setCanvasLayer:function(e,t){e.options.icon instanceof L.DivIcon||(t&&e._map?(e._map.removeLayer(e),this.addLayer(e)):t||(this._dirtyLayerGrid=!0,this._map.addLayer(e),this.options.autoRedraw&&this.redraw()))},_rebuildLayerGrid:function(){this.layerGrid={};for(var e in this.layers)this._addLayer(this.layers[e]);this._dirtyLayerGrid=!1},_addLayer:function(e){if(!(e.options.draggable||e.options.icon instanceof L.DivIcon)){var t,s=this.options.tileSize,i=this._map.project(e.getLatLng()),a=L.point(e.options.icon.options.iconSize);if(t=e.options.icon.options.iconAnchor?L.point(e.options.icon.options.iconAnchor):L.point([a.x/2,a.y/2]),e._bounds=L.bounds([[i.x-t.x,i.y-t.y],[i.x+(a.x-t.x),i.y+(a.y-t.y)]]),e._bounds.min.distanceToSq(e._bounds.max)>1e-6){var n,o,r=L.point([Math.floor(e._bounds.min.x/s),Math.floor(e._bounds.min.y/s)]),l=L.point([Math.floor(e._bounds.max.x/s),Math.floor(e._bounds.max.y/s)]);for(o=r.y;o<=l.y;o++)for(n=r.x;n<=l.x;n++)this._addLayerToBucket(e,L.point([n,o]))}else this._addLayerToBucket(e,L.point([Math.floor(i.x/s),Math.floor(i.y/s)]))}},_addLayerToBucket:function(e,t){var s=this.layerGrid[t.x];s||(s=this.layerGrid[t.x]={}),s=this.layerGrid[t.x][t.y],s||(s=this.layerGrid[t.x][t.y]=[]),s.push(e)},redraw:function(e){if(this._loadingImages>0)return void(this._queuedDraw=!0);var t=this._map.getZoom();(e||t!=this._currentZoom||this._dirtyLayerGrid)&&(this._rebuildLayerGrid(),this._currentZoom=t),L.TileLayer.Canvas.prototype.redraw.call(this)},drawTile:function(e,t,s){var i=this.options.tileSize,a=e.getContext("2d");a.clearRect(0,0,i,i);var n=this.layerGrid[t.x]?this.layerGrid[t.x][t.y]:[];if(n&&0!=n.length){var o=this.options.sortOrder;n.sort(function(e,t){var s=e._latlng.lat*e._latlng.lng+e.options.zIndexOffset,i=t._latlng.lat*t._latlng.lng+t.options.zIndexOffset;return s>i?o:i>s?-1*o:0});for(var r,l,c,d=L.point([t.x*i,t.y*i]),u=n.length,h=0;u>h;++h)if(n[h].getVisible()){var p=this._getImage(n[h].options.icon.options.iconUrl);p&&(r=n[h]._bounds,l=L.point(n[h].options.icon.options.iconSize),c=n[h].options.icon.options.spriteOffset,c=c?L.point(c):L.point(0,0),a.drawImage(p,c.x,c.y,p.width,p.height,Math.floor(r.min.x-d.x),Math.floor(r.min.y-d.y),l.x,l.y))}}},_preloadImage:function(e){var t=L.stamp(this);if(L.CanvasLayer.Images[e])return void(L.CanvasLayer.Images[e].listeners[t]||(L.CanvasLayer.Images[e].listeners[t]=this));this._images[e]=1,this._loadingImages++;var s=this,i=new Image;i.listeners={},i.listeners[t]=this,i.onload=function(){this._loaded=!0,s._loadingImages--;this.listeners.length;for(var e in this.listeners){var t=this.listeners[e];0==t._loadingImages&&(t.redraw(),t._queuedDraw=!1)}},i.onerror=function(){s._loadingImages--,0==s._loadingImages&&s._queuedDraw&&(s.redraw(),s._queuedDraw=!1)},i.src=e,L.CanvasLayer.Images[e]=i},_getImage:function(e){var t=L.CanvasLayer.Images[e];return t&&t._loaded?t:(t||this._preloadImage(e),!1)}}):L.LayerGroup.extend({redraw:function(){},setAutoRedraw:function(){},_setCanvasLayer:function(e,t){}}),L.canvasLayer=function(e){return new L.CanvasLayer(e)},L.Marker=L.Marker.extend({options:{visible:!0},isAdded:function(){return!(!this._canvasLayer&&!this._map)},setVisible:function(e){this.options.visible!=e&&(e?(this._icon&&(this._icon.style.display=""),this._shadow&&(this._shadow.style.display="")):(this._icon&&(this._icon.style.display="none"),this._shadow&&(this._shadow.style.display="none")),this._canvasLayer&&this._canvasLayer.options.autoRedraw&&this._canvasLayer.redraw()),this.options.visible=e},getVisible:function(){return this.options.visible},isVisible:function(){return this.getVisible()},setTitle:function(e){this.options.title=e,this._icon&&(this._icon.title=this.options.title)},setClickable:function(e){if(this.options.clickable=e,this._icon)if(e)L.DomUtil.hasClass(this._icon,"leaflet-clickable")||this._initInteraction();else{L.DomUtil.removeClass(this._icon,"leaflet-clickable"),L.DomEvent.removeListener(this._icon,"click",this._onMouseClick);for(var t=["dblclick","mousedown","mouseover","mouseout"],s=0;s<t.length;s++)L.DomEvent.removeListener(this._icon,t[s],this._fireMouseEvent)}},setDraggable:function(e){this.options.draggable=e,this._canvasLayer&&this._canvasLayer._setCanvasLayer(this,!e),e?this.dragging.enable():this.dragging.disable()},setHtml:function(e){this.options.icon instanceof L.DivIcon&&(this._icon.innerHTML=this.options.html=e)},setClassName:function(e){this.options.icon instanceof L.DivIcon&&(this._icon.className=this.options.className="leaflet-marker-icon leaflet-zoom-hide "+e)}}),L.Icon=L.Icon.extend({options:{},_createImg:function(e){var t;if(this.options.spriteOffset){var s=L.point(this.options.spriteOffset);t=document.createElement("div"),t.style.backgroundImage='url("'+e+'")',t.style.backgroundPosition="-"+s.x+"px -"+s.y+"px"}else L.Browser.ie6?(t=document.createElement("div"),t.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'")'):(t=document.createElement("img"),t.src=e);return t}}))});var MapsWebAddressClass=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getIdFromUrl",value:function(){var e=window.location.hash,t=!1;return e&&(e=e.replace("#",""),e=e.split("/"),t=[e[0],e[1]].join("/")),t}},{key:"setUrl",value:function(e,t){if(t){var s=e.name.replace(new RegExp(" ","g"),"+").toLowerCase(),i=e.id;window.location.hash=[i,s].join("/")}}}]),e}(),MapsWebAddress=new MapsWebAddressClass,durations=[],acp={process:function(e){e||$("#tablelist").find(".report").html('<div class="faint">Pending ...</div>').find(".status").find(".inner").css({width:"0%"}).removeClass("orange green red");$("#tablelist").find("tr").each(function(){var t=$(this).find(".name").attr("data-table");if(!("undefined"==typeof t||e&&t!=e)){console.log("Process:",t);var s=$(this).find(".status").find(".inner"),i=$(this).find(".report");s.css({width:"50%"}).addClass("orange"),i.html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Processing ...</div>'),$.ajax({url:"/database/libra/process/"+t,success:function(e){var t=e[0],a=e[1];t?(s.css({width:"100%"}).removeClass("orange").addClass("green"),i.html('<div class="green"><i class="fa fa-check"></i> '+a+"</div>")):(s.css({width:"100%"}).removeClass("orange").addClass("red"),i.html('<div class="red"><i class="fa fa-times"></i> '+a+"</div>"))},error:function(e,t,a){s.css({width:"100%"}),i.html('<div class="red"><i class="fa fa-times"></i> FATAL :: Failed to updated table</div>'),console.error(e,t,a)}})}})},gameProcessAllMapping:function(){$(".ordered .report").html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Waiting ...</div>');var e=GameExtractTables;acp.gameMappingRecurrsive(e,!0)},gameProcessRecurrsive:function(e){if(0==e.length)return void console.log("Finished");var t=e[0];t&&(e.shift(),acp.gameProcessManual(t,function(){acp.gameProcessRecurrsive(e,!1)}))},gameMappingRecurrsive:function(e,t){if(0==e.length)return void console.log("Finished");var s=e[0];s&&(e.shift(),acp.gameMappingManual(s,t,function(){acp.gameMappingRecurrsive(e,!1)}))},gameProcessManual:function(e,t){console.log("Processing: "+e);var s="/database/game/process/"+e,i=$(".row-"+e),a=i.find(".status .inner"),n=i.find(".report");i.on("click",function(){$(this).find(".extract-report").toggle()}),a.css({width:"50%"}).removeClass("red green"),n.html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Processing ...</div>'),i.addClass("acp-orange-borders");var o=i.position().top-200;$("body").scrollTop(o),$.ajax({url:s,success:function(s){if(!s||"function"!=typeof s.join)return void console.error("Error with: "+e);var o=s.join("<br>");n.html('<div class="green"><i class="fa fa-check"></i> Successfully updated</div><div class="extract-report">'+o+"</div>"),a.css({width:"100%"}).addClass("green"),i.addClass("acp-mapped"),t&&t()},error:function(e,t,s){a.css({width:"100%"}).addClass("red"),n.html('<div class="red"><i class="fa fa-times"></i> '+e+"</div>"),i.addClass("acp-red-borders"),console.error(t,s),console.log(e)}})},gameMappingManual:function(e,t,s){console.log("Processing: "+e);var i="/database/game/offsets/"+e,a=$(".row-"+e),n=a.find(".status .inner"),o=a.find(".report");a.on("click",function(){$(this).find(".extract-report").toggle()}),n.css({width:"50%"}).removeClass("red green"),o.html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Processing ...</div>'),a.addClass("acp-orange-borders");var r=a.position().top-200;$("body").scrollTop(r),$.ajax({url:i,data:{reset:t},success:function(t){return t?(o.html('<div class="green"><i class="fa fa-check"></i> Complete</div>'),n.css({width:"100%"}).addClass("green"),a.addClass("acp-mapped"),void(s&&s())):void console.error("Error with: "+e)},error:function(e,t,s){n.css({width:"100%"}).addClass("red"),o.html('<div class="red"><i class="fa fa-times"></i> '+e+"</div>"),a.addClass("acp-red-borders"),console.error(t,s),console.log(e)}})},gameSetup:function(){var e=[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36];$(".dataconnections .setup-progress").css({width:"0%"}),$(".dataconnections .setup-status").html("Starting, "+e.length+" to process."),acp.gameSetupRecurrsive(e,e.length)},gameSetupLodestone:function(){var e=items;acp.gameSetupLodestoneRecurrsive(e,e.length)},gameSetupLodestoneRecurrsive:function(e,t){var s=e[0];e.shift();var i="/database/gamesetup/lodestone/"+s.id+"/"+s.name_en,a=t-e.length,n=a/t*100;$(".ls-verify .setup-status").html('<img src="/img/loader/loading2.gif" class="loaderimg"> ('+a+"/"+t+") "+s.id+" - "+s.name_en);var o=+new Date;$.ajax({url:i,data:{count:e.length,total:t},success:function(s){if(s){$(".ls-verify .setup-progress").css({width:n+"%"}),$(".ls-verify .setup-status").html('<img src="/img/loader/loading2.gif" class="loaderimg"> ('+a+"/"+t+") "+s[0]+" - "+s[1]+' <i class="fa fa-check"></i>'),durations.push(+new Date-o);var i=durations.reduce(function(e,t){return e+t}),r=(i/durations.length).toFixed(0);durations.length>500&&durations.shift();var l=+new Date+e.length*r,c=moment(l);return $(".ls-verify .setup-time span").text("Finish "+c.fromNow()+" ("+c.format("h:mm:ss a")+")"),e.length>0?void acp.gameSetupLodestoneRecurrsive(e,t):void $(".ls-verify .setup-status").html('<i class="fa fa-check"></i> Completed! '+a+"/"+t)}console.error("Unknown error?"),console.log(s)},error:function(e,t,s){$(".ls-verify .setup-progress").css({width:"0%"}),$(".ls-verify .setup-status").html("Error, check console"),console.error(t,s),console.log(e.responseText)}})},gameSetupRecurrsive:function(e,t){var s=e[0];e.shift();var i="/database/gamesetup/connections/"+s,a=t-e.length,n=a/t*100;$.ajax({url:i,success:function(s){return s?($(".dataconnections .setup-progress").css({width:n+"%"}),$(".dataconnections .setup-status").html('<img src="/img/loader/loading2.gif" class="loaderimg"> Completed: ('+a+"/"+t+") "+s),e.length>0?void acp.gameSetupRecurrsive(e,t):void $(".dataconnections .setup-status").html('<i class="fa fa-check"></i> Completed! '+a+"/"+t)):(console.error("Unknown error?"),void console.log(s))},error:function(e,t,s){$(".dataconnections .setup-progress").css({width:"0%"}),$(".dataconnections .setup-status").html("Error, check console"),console.error(t,s),console.log(e.responseText)}})},fetchtable:function(){var e=$(".tablelist").val(),t=$(".tablepage").val().trim(),s=$(".tablecontent");return e?void $.ajax({url:"/database/game/table/"+e+"/"+t,success:function(e){s.empty().html('<table class="w100"><thead><tr></tr></thead><tbody></tbody></table>');for(var t in e[1])s.find("table thead tr").append("<th>"+t+"</th>");var i=0;for(var a in e){var n=e[a];if(n){s.find("table tbody").append('<tr id="'+i+'">');for(var o in n){var r=n[o];r.length>25&&(r=r.substring(0,50)),s.find("table tbody tr#"+i).append("<td>"+r+"</td>")}if(s.find("table tbody").append("</tr>"),i++,i>100)break}}acp.hoverState()},error:function(e,t,s){console.error(e,t,s)}}):void console.error("No fetch table, was blank/false")},showTable:function(e){$(".acp-csv, .acp-explorer").hide(),$(".acp-"+e).show(),$(".tableview .active").removeClass("active"),$(".tableview ."+e).addClass("active")},addTranslationRow:function(){if("undefined"==typeof auto||!auto)return void alert("Auto could not be calculated, try again, or contact me!");var e=$(".lang-row").eq(0).clone();auto+=1,e.addClass("newinsert"),e.find("input").val(""),e.find("#autoid").val(auto),e.find(".autofield").text(auto),e.find(".notesbox").remove(),e.find("input").each(function(){var e=$(this).attr("name");e=e.replace("languages[0]","languages["+auto+"]"),$(this).attr("name",e)}),$(".lang-panel").prepend(e)},processSync:function(e,t){$(".row-"+e+" .status").html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Processing ...</div>'),$.ajax({url:"/xivsync/process/{type}".replace("{type}",e),success:function(s){return"ok"==s?($(".row-"+e+" .status").html('<div class="green"><i class="fa fa-check"></i> Successfully updated</div>'),void(t&&t())):void console.log(s)},error:function(e,t,s){console.error(e.responseText),console.error(t,s)}})},processSyncRecurrsive:function(e){var t=e[0];e.shift(),acp.processSync(t,function(){return e.length>0?acp.processSyncRecurrsive(e):void console.log("Finished")})},processSyncAll:function(){var e=routes;acp.processSyncRecurrsive(e)},processMap:function(e,t){$(".row-"+e+" .status").html('<div class="orange"><img src="/img/loader/loading2.gif" class="loaderimg"> Processing ...</div>');var s=$(".row-"+e).position().top-200;$("body").scrollTop(s),$.ajax({url:"/database/maps/process/{type}".replace("{type}",e),success:function(s){return"ok"==s?($(".row-"+e+" .status").html('<div class="green"><i class="fa fa-check"></i> Successfully processed</div>'),void(t&&t())):void console.log(s)},error:function(e,t,s){console.error(e.responseText),console.error(t,s)}})},processMapAll:function(){var e=folders;acp.processMapRecurrsive(e)},processMapRecurrsive:function(e){var t=e[0];e.shift(),acp.processMap(t,function(){return e.length>0?acp.processMapRecurrsive(e):void console.log("Finished")})},apiReset:function(){$(".api-response").html("")},apiGet:function(){for(var e=$(".api-test").val().trim(),t=parseInt($(".api-value").val().trim()),t=t?t:1,s=t-1;s>=0;s--)console.log(s+" - queuing request ..."),$.ajax({url:e,success:function(t){acp.apiResponse(e,JSON.stringify(t))},error:function(t,s,i){t=t.responseText,acp.apiResponse(e,t)}})},apiResponse:function(e,t){$(".api-response").append('<div class="api-res"><span>'+e+"</span>"+t+"</div>")}};